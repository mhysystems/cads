{
  "data_source" : "../../profiles/rawprofile_cv405_2023-03-07.db",
  
  "sqlite_gocator" : {
    "range" : [0,9007199254740991],
    "fps" : 980,
    "forever" : false,
    "delay" : 98
  },

  "fiducial" : {
    "fiducial_depth" : 3,
    "fiducial_x" : 50,
    "fiducial_y" : 67,
    "fiducial_gap" : 78,
    "dump_match" : false,
    "cross_correlation_threshold" : 0.4
  },

  "width_n" : 1820,
  "clip_height" : 36.0,
  "left_edge_nan" : 10,
  "right_edge_nan" : 10,

  "daily_upload" : true,
  "daily_start_time" : "04:00",
  "spike_filter" : 5,
  "sobel_filter" : 5,
  "nan_%" : 0.1,

  "dbscan" : {
    "InCluster" : 5,
    "MinPoints" : 20
  },

  "revolution_sensor" : {
    "source" : "unbiased",
    "trigger_num" : 2,
    "bias" : 0.0,
    "bidirectional" : true
  },

  "iirfilter" : {
    "skip" : 4000,
    "delay" : 10,
    "sos" :[[ 2.14907175e-07,  2.14907175e-07, 0.00000000e+00, 1.00000000e+00, -9.69927546e-01, 0.00000000e+00],
            [ 1.00000000e+00, -1.97586675e+00, 1.00000000e+00, 1.00000000e+00, -1.94277154e+00, 9.43643754e-01],
            [ 1.00000000e+00, -1.99377076e+00, 1.00000000e+00, 1.00000000e+00, -1.95020316e+00, 9.50994134e-01],
            [ 1.00000000e+00, -1.99709837e+00, 1.00000000e+00, 1.00000000e+00, -1.95947251e+00, 9.60163976e-01],
            [ 1.00000000e+00, -1.99825720e+00, 1.00000000e+00, 1.00000000e+00, -1.96849222e+00, 9.69090163e-01],
            [ 1.00000000e+00, -1.99878518e+00, 1.00000000e+00, 1.00000000e+00, -1.97634855e+00, 9.76869893e-01],
            [ 1.00000000e+00, -1.99906168e+00, 1.00000000e+00, 1.00000000e+00, -1.98292144e+00, 9.83385178e-01],
            [ 1.00000000e+00, -1.99921582e+00, 1.00000000e+00, 1.00000000e+00, -1.98843208e+00, 9.88855603e-01],
            [ 1.00000000e+00, -1.99930017e+00, 1.00000000e+00, 1.00000000e+00, -1.99319414e+00, 9.93592594e-01],
            [ 1.00000000e+00, -1.99933782e+00, 1.00000000e+00, 1.00000000e+00, -1.99752113e+00, 9.97907883e-01]]
  },
  "constraints" : {
    "current_length" : [903000,907000],
    "surface_speed" : [4.5,9.9],
    "pulley_oscillation" : [0,5],
    "cads_to_origin" : [0,907000],
    "rotation_period" : [140000,210000],
    "barrel_height" : [-36.5,-31.0],
    "z_unbiased" : [-37.0,4.0]
  },

  "startup_delete_db" : true,
  "profile_db_name" : "profile.db",
  "state_db_name" : "state.db",
  "transient_db_name" : "transient.db",
  "use_encoder" : false,

  "filters" : {
    "SchmittThreshold" : 0.05
  },

  "conveyor" : {
    "Org"  : "bhp",
    "Site" : "whaleback",
    "Name" : "cv405",
    "Timezone" : "Australia/Perth",
    "PulleyCircumference" : 2613.8,
    "MaxSpeed" : 5700.0
  },

  "belt" : {
    "Installed" : "2023-01-14T00:00:00Z",
    "PulleyCover" : 6.0,
    "CordDiameter" : 4.3,
    "TopCover" : 17.0,
    "Width" : 1500,
    "Length" : 901000,
    "Splices" : 1
  },

  "scan" : {
    "Orientation" : -1
  },


  "webapi_urls" : {
    "add_conveyor" : ["https://server.mhysystems.com/api/conveyors",true],
    "add_meta" : ["https://server.mhysystems.com/api/meta",true],
    "add_belt" : ["https://server.mhysystems.com/api/belts",true],
    "add_scan" : ["https://server.mhysystems.com/api/scans",true]
  },

  "communications" : {
    "NatsUrl" : "10.9.1.1",
    "UploadRows" : 1024
  },
  
  "upload_profile" : true,
  "base_url" : "https://server.mhysystems.com/api",
  "lua_window_height" : 2,
  "lua_fn" : "function process(width,height)\nlocal sum = 0\nfor i = 1+50,width-50 do\nfor j = 0,height-1 do\nsum = sum + ((win[j*width + i] <= 25 and win[j*width + i] > 10)and 1 or 0)\nend\nend\nreturn (sum / (width * height)) > 0.001 and sum or 0\nend"
}
